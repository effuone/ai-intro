<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>reveal.js</title>

	<link rel="stylesheet" href="dist/reset.css">
	<link rel="stylesheet" href="dist/reveal.css">
	<link rel="stylesheet" href="dist/theme/black.css">

	<!-- Theme used for syntax highlighted code -->
	<link rel="stylesheet" href="plugin/highlight/monokai.css">
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section>
				<img src="https://miro.medium.com/v2/resize:fit:1178/1*70dL8KjhI3tFoOW6LHahUA.png" alt="Message queue"
					style="height: 380px; margin: 0 auto 4rem auto; background: transparent;" class="demo-logo">
				<h3>Introduction to Redis</h3>
				<p>
				<h6>Parsing, Scraping, and Processing Time-Consuming Functions</h3>
				</h6>
				<small>Cooked by <a href="https://www.linkedin.com/in/alibek-seitov-2b7055243/">Alibackend</a></small>
				</p>
			</section>
			<section>
				<p>Agenda</p>
				<ul>
					<li>What is Redis?</li>
					<li>Use Cases for Redis</li>
					<li>Real-world hackathon example!</li>
					<li>Setting Up Redis</li>
					<li>Implementing Message Queuing with Redis</li>
					<li>Parsing and Scraping with Redis</li>
					<li>Q&A</li>
				</ul>
			</section>
			<section>
				<h2>What is Redis?</h2>
				<p>Redis is an in-memory data structure store, used as a database, cache, and message broker.</p>
				<ul>
					<li>Key-Value Store</li>
					<li>Supports various data structures</li>
					<li>High Performance (RAM-based)</li>
					<li>Flexible and Scalable</li>
				</ul>
			</section>
			<section>
				<h2>Use Cases for Redis</h2>
				<ul>
					<li>Caching</li>
					<li>Real-Time Analytics</li>
					<li>Message Queuing</li>
					<li>Pub/Sub Messaging</li>
				</ul>
			</section>
			<section>
				<h2>Setting Up Redis locally</h2>
				<pre><code class="language-bash">
# Install Redis on Ubuntu
sudo apt update
sudo apt install redis-server

# Start Redis
sudo systemctl start redis

# Check Redis status
sudo systemctl status redis
                </code></pre>
			</section>
			<section>
				<h4>Setting Up Redis with Docker Compose</h4>
				<pre><code class="language-bash">
# Create a docker-compose.yml file
version: '3.1'

services:
  redis:
    image: redis:latest
    container_name: redis
    ports:
      - "6379:6379"
    volumes:
      - redis-data:/data

volumes:
  redis-data:
                </code></pre>
				<pre><code class="language-bash">
# Start Redis using Docker Compose
docker-compose up -d
                </code></pre>
			</section>
			<section>
				<section data-auto-animate>
					<h4>Implementing Message Queuing with BullMQ</h4>
					<p>BullMQ can be used as a message broker to queue tasks for parsing, scraping, and processing.</p>
					<pre><code class="language-javascript">
import { Queue } from "bullmq";

const queue = new Queue("Paint");
await queue.add("cars", { 
	color: "blue", 
	delay: 30000
});
                </code></pre>
				</section>
				<section data-auto-animate>
					<h4>Implementing Message Queuing with BullMQ</h4>
					<p>BullMQ can be used as a message broker to queue tasks for parsing, scraping, and processing.</p>
					<pre><code class="language-javascript">
import { Worker } from 'bullmq';

const worker = new Worker('Paint', async job => {
	if (job.name === 'cars') {
	await paintCar(job.data.color);
	}
}, { concurrency: 100 });
                </code></pre>
				</section>
			</section>
			<section>
				<h4>Parsing and Scraping with BullMQ</h4>
				<p>Use BullMQ to manage and distribute parsing and scraping tasks efficiently.</p>
				<pre><code class="language-javascript">
import axios from 'axios';
import cheerio from 'cheerio';
import { Queue, Worker } from 'bullmq';

// Example function for e-commerce scrapping 
async function scrapeWebsite(url) {
    const html = (await axios.get(url)).data;
	const $ = cheerio.load(html);
	const title = $('.title').text();
	const price = $('.price').text();
	return { title, price };
}

const queue = new Queue('taskQueue');

// Adding scrape tasks to the queue
await queue.add('scrape', { url: 'https://kaspi.kz/shop' });

// Processing scrape tasks
const worker = new Worker('taskQueue', async job => {
    if (job.name === 'scrape') {
        await scrapeWebsite(job.data.url);
    }
});
                </code></pre>
			</section>
			<section>
				<h4>Processing Time-Consuming Functions</h4>
				<p>BullMQ can help manage and distribute time-consuming tasks to ensure efficient processing.</p>
				<pre><code class="language-javascript">
// Example of a time-consuming function
function processData(data) {
    // Simulate a time-consuming task
    return new Promise(resolve => {
        setTimeout(() => {
            console.log('Processed data:', data);
            resolve();
        }, 5000);
    });
}

const queue = new Queue('taskQueue');

// Adding processing tasks to the queue
await queue.add('process', { data: 'complex data' });

// Processing the tasks
const worker = new Worker('taskQueue', async job => {
    if (job.name === 'process') {
        await processData(job.data.data);
    }
});
                </code></pre>
			</section>
			<section>
				<h2>Creating Repeatable Jobs with BullMQ</h2>
				<pre><code class="language-javascript">
import { Queue } from 'bullmq';

const queue = new Queue('taskQueue');

// Adding a repeatable job to the queue
await queue.add('repeatTask', { data: 'some data' }, {
    repeat: { cron: '*/5 * * * *' } // Repeat every 5 minutes
});

// Processing the repeatable jobs
import { Worker } from 'bullmq';

const worker = new Worker('taskQueue', async job => {
    if (job.name === 'repeatTask') {
        console.log('Processing repeatable task:', job.data);
    }
});
                </code></pre>
			</section>
			<section>
				<h2>Message queuing</h2>
				<h3>Real-world example: Hackathon Case</h3>
			</section>
			<section>
				<section data-auto-animate>
					<h2>Backend services</h2>
					<p>LLM service</p>
					<pre><code class="language-typescript">
import openai from 'openai'
class LLMService {
	constructor() {
		this.openai = new OpenAI({
			apiKey: process.env.OPENAI_API_KEY
		});
		this.systemPrompt = "You are application reviewer. Please check if candidate fits us.";
	}
	async askLLM(userPrompt: string): Promise<string> {
		// send request to LLM, process and return/stream text/JSON
	}
}
					</code></pre>
				</section>
				<section data-auto-animate>
					<h2>Backend services</h2>
					<p>Github service</p>
					<pre><code class="language-typescript">
class GitHubService {
	async fetchUserData(gitHubHandle: string): Promise<any> {
		// Fetch user data from GitHub
	}
	
	async checkForPlagiarism(repoUrl: string): Promise<number> {
		// Check for potential plagiarism in percents
	}
}
					</code></pre>
				</section>
				<section data-auto-animate>
					<h2>Backend services</h2>
					<p>Telegram service</p>
					<pre><code class="language-typescript">
class TelegramService {
	async sendDecision(mentorId: string, decision: string): Promise<void> {
		// Send decision to the mentor via Telegram
	}
	
	async getFeedbackFromMentor(mentorId: number, feedback: string, systemValues: string): Promise<string> {
		// Analyze feedback from the mentor and apply prompt-tuning
		// Returns updated system values based on the feedback
	}
}					  
					</code></pre>
				</section>
				<section data-auto-animate>
					<h2>Backend services</h2>
					<p>Database service</p>
					<pre><code class="language-typescript">
class DatabaseService {
	async fetchApplicationData(): Promise<any[]> {
		// Fetch application data from Google Sheets
	}
	
	async saveReviewResult(applicationId: string, result: any): Promise<void> {
		// Save the review result to Google Sheets
	}
}										
					</code></pre>
				</section>
			</section>
			<section>
				<h2>Review service</h2>
				<pre><code class="language-typescript">
import { Queue, Worker } from 'bullmq';
import Redis from 'ioredis';

class ReviewService {
	private gitHubService: GitHubService;
	private telegramService: TelegramService;
	private llmService: LLMService;
	private databaseService: DatabaseService;
	private reviewQueue: Queue;

	constructor() {
		this.gitHubService = new GitHubService();
		this.telegramService = new TelegramService();
		this.llmService = new LLMService();
		this.databaseService = new DatabaseService();
		const redisConnection = new Redis();
		this.reviewQueue = new Queue('reviewQueue', { connection: redisConnection });
	}

	async queueApplicationForReview(application: any): Promise<void> {
		await this.reviewQueue.add('reviewTask', { application });
	}

	async reviewApplication(application: any): Promise<any> {
		// Process application data
		const userData = await this.gitHubService.fetchUserData(application.gitHubHandle);
		const decision = await this.llmService.processApplication(application);

		if(decision.uncertain) {
			// Send to mentor for feedback
			await this.telegramService.sendDecision(application.mentorId, decision.summaryAndReasoning);
		} else {
			// Save the result
			await this.databaseService.saveReviewResult(application.id, decision);
		}

		return decision;
	}

	setupWorker() {
		new Worker('reviewQueue', async job => {
			const application = job.data.application;
			return this.reviewApplication(application);
		}, {
			connection: this.redisConnection
		});
	}
}
					
				</code></pre>
			</section>
			<section>
				<h2>And the final step</h2>
				<pre><code class="language-javascript">
// Initialize ReviewService and setup worker
const reviewService = new ReviewService();
reviewService.setupWorker();

// Example application data
const application = {
	id: 'app123',
	userId: 'user456',
	gitHubHandle: 'userGithub',
	// ... other application data
};

// Queue an application for review
reviewService.queueApplicationForReview(application);
				</code></pre>
			</section>
		</div>
	</div>

	<script src="dist/reveal.js"></script>
	<script src="plugin/notes/notes.js"></script>
	<script src="plugin/markdown/markdown.js"></script>
	<script src="plugin/highlight/highlight.js"></script>
	<script>
		// More info about initialization & config:
		// - https://revealjs.com/initialization/
		// - https://revealjs.com/config/
		Reveal.initialize({
			hash: true,
			autpPlayMedia: true,
			// Learn about plugins: https://revealjs.com/plugins/
			plugins: [RevealMarkdown, RevealHighlight, RevealNotes]
		});
	</script>
</body>

</html>